<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://cesiumjs.org/releases/1.39/Build/Cesium/Widgets/widgets.css">
    <link href="https://fonts.googleapis.com/css?family=Lobster|Open+Sans" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
    <script src="https://cesiumjs.org/releases/1.39/Build/Cesium/Cesium.js"></script>

    <script src="https://unpkg.com/leaflet@1.2.0/dist/leaflet.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet-ajax/2.1.0/leaflet.ajax.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chroma-js/1.3.4/chroma.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <meta name="description" content="">
    <meta name="author" content="">
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="css/modern-business.css" rel="stylesheet">

    <!-- Custom Fonts -->
    <link href="font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link rel="shortcut icon" href="assets/favicon/earthquake2.png" type="image/x-icon">

    <title>NetorkAccessibility</title>
</head>

<div id="cesiumContainer"></div>
<div class="legend">
    <h4> Travel Time to Portland International Airport </h4>
    <p><b> Based on Evening Peak Hour Traffic Volume (2013) </b></p><br/>
    <!--<i style="background: #b10026"></i> <p> 75min+ </p>-->
    <!--<i style="background: #e31a1c"></i> <p> 60min to 75min </p>-->
    <!--<i style="background: #fc4e2a"></i> <p> 45min to 60min </p>-->
    <!--<i style="background: #fd8d3c"></i> <p> 30min to 45min </p>-->
    <!--<i style="background: #feb24c"></i> <p> 15min to 30 </p>-->
    <!--<i style="background: #fed976"></i> <p> 5min to 15min </p>-->
    <!--<i style="background: #ffffb2"></i> <p> 0 to 5min </p><br/>-->
    <i style="background: #d73027"></i> <p> 75min+ </p>
    <i style="background: #fc8d59"></i> <p> 60min to 75min </p>
    <i style="background: #fee08b"></i> <p> 45min to 60min </p>
    <i style="background: #ffffbf"></i> <p> 30min to 45min </p>
    <i style="background: #d9ef8b"></i> <p> 15min to 30 </p>
    <i style="background: #91cf60"></i> <p> 5min to 15min </p>
    <i style="background: #1a9850"></i> <p> 0 to 5min </p><br/>
    <!--<p> This 3D thematic map shows the the travel time from every zone to Portland International Airport in an evening peak hour in 2013. The data is generated through the VISSUM based on the model framework provided by Portland Metro. </p><br/>-->
    <!--<p> Virtual globe Lib: cesium.js | BaseMap: Mapbox | Travel Time: Shangjia Dong </p>-->
    <p> Author: <a href="people.oregonstate.edu/~dongs">Shangjia Dong </a>| Ph.D Candidate</p>
    <p>Oregon State University</p>
    <p> Acknowledgement: Bo Zhao, Haizhong Wang </p>
</div>

<body>

<!--add a Bootstrap navbar-->
<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div class="container">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="#">
                <img src="img/earthquake2.png" class="align-top" height="25px" align="left"> &nbsp; Transportation Network Accessibility
            </a>
        </div>
        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="index.html">Home</a>
                </li>
                <li>
                    <a href="about.html">About</a>
                </li>
                <!--<li>-->
                <!--<a href="services.html">Map</a>-->
                <!--</li>-->
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Map<b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        <li>
                            <a href="2dmap.html">Map - 2D</a>
                        </li>
                        <li>
                            <a href="3dmap.html">Map - 3D</a>
                        </li>

                    </ul>
                </li>

                <!--<li>-->
                <!--<a href="contact.html">Contact</a>-->
                <!--</li>-->

                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Portfolio<b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        <li>
                            <a href="assets/Final_Report_Lifeline.pdf" target="_blank">Phase 1</a>
                        </li>
                        <li>
                            <a href="https://www.researchgate.net/publication/319494030_Post-Disaster_Mobility_in_Disrupted_Transportation_Network_Case_Study_of_Portland_Oregon" target="_blank">Phase 2</a>
                        </li>
                        <li>
                            <a href="#">Phase 3 - Developing</a>
                        </li>
                        <!--<li>-->
                        <!--<a href="portfolio-4-col.html">4 Column Portfolio</a>-->
                        <!--</li>-->
                        <!--<li>-->
                        <!--<a href="portfolio-item.html">Single Portfolio Item</a>-->
                        <!--</li>-->
                    </ul>
                </li>
                <li>
                    <a href="contact.html">Contact</a>
                </li>

                <li class = 'button'>
                    <dt>
                        <!--facebook icon-->
                        <a class="fa fa-facebook-square btn fa-2x"
                           href="https://www.facebook.com/sharer/sharer.php?u=https%3A//shangjiadong.github.io/NetAcce/"
                           target="_blank"></a>
                    </dt>
                </li>
                <li class = 'button'>
                    <dt>
                        <!--github icon-->
                        <a class="fa fa-github btn fa-2x" href="https://github.com/shangjiadong/networkAccess"
                           target="_blank"></a>
                    </dt>
                </li>

                <!--<li class="dropdown">-->
                <!--<a href="#" class="dropdown-toggle" data-toggle="dropdown">Blog <b class="caret"></b></a>-->
                <!--<ul class="dropdown-menu">-->
                <!--<li>-->
                <!--<a href="blog-home-1.html">Blog Home 1</a>-->
                <!--</li>-->
                <!--<li>-->
                <!--<a href="blog-home-2.html">Blog Home 2</a>-->
                <!--</li>-->
                <!--<li>-->
                <!--<a href="blog-post.html">Blog Post</a>-->
                <!--</li>-->
                <!--</ul>-->
                <!--</li>-->
                <!--<li class="dropdown">-->
                <!--<a href="#" class="dropdown-toggle" data-toggle="dropdown">Other Pages <b class="caret"></b></a>-->
                <!--<ul class="dropdown-menu">-->
                <!--<li>-->
                <!--<a href="full-width.html">Full Width Page</a>-->
                <!--</li>-->
                <!--<li>-->
                <!--<a href="sidebar.html">Sidebar Page</a>-->
                <!--</li>-->
                <!--<li>-->
                <!--<a href="faq.html">FAQ</a>-->
                <!--</li>-->
                <!--<li>-->
                <!--<a href="404.html">404</a>-->
                <!--</li>-->
                <!--<li>-->
                <!--<a href="pricing.html">Pricing Table</a>-->
                <!--</li>-->
                <!--</ul>-->
                <!--</li>-->
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>

<script>

    //create a cesium view, and use the mapbox dark map as the base map.

    var viewer = new Cesium.Viewer('cesiumContainer', {
        imageryProvider : new Cesium.MapboxImageryProvider({
            mapId : 'mapbox.dark',
            accessToken : 'pk.eyJ1Ijoic2hhbmdqaWEiLCJhIjoiY2o4eGYybHVtMjFpMTJ3cDhkNTlsNG1qeiJ9.eOP2kq4hzAJaTMg4Rqg5yA'
        }),
        terrainProvider: new Cesium.CesiumTerrainProvider({
            url: '//assets.agi.com/stk-terrain/world'
        }),
        vrButton: true,  // virtual reality support
        infoBox: false, // pick a feature and show its attributes
        sceneModePicker: false, // 2d, 2.5d and 3d
        navigationHelpButton: false,
        baseLayerPicker : false,
        fullscreenButton: false,
        geocoder: false,
        skyBox: false,
        homeButton: false,
        animation: false,
        timeline: false
    });

    //    viewer.dataSources.removeAll();

    // Set function for color.md ramp

//    function setColor(time) {
//        return time > 5400 ? '#b10026' :
//            time > 3600 ? '#e31a1c' :
//                time > 2700 ? '#fc4e2a' :
//                    time > 1800 ? '#fd8d3c' :
//                        time > 900 ? '#feb24c' :
//                            time > 300 ? '#fed976' :
//                                '#ffffb2';
//    }
    function setColor(time) {
        return time > 4500 ? '#d73027' :
            time > 3600 ? '#fc8d59' :
                time > 2700 ? '#fee08b' :
                    time > 1800 ? '#ffffbf' :
                        time > 900 ? '#d9ef8b' :
                            time > 300 ? '#91cf60' :
                                '#1a9850';
    }

    var dataSource = Cesium.GeoJsonDataSource.load('assets/basefile.geojson').then(
        function(dataSource) {

            var p = dataSource.entities.values;

            for (var i = 0; i < p.length; i++) {

                p[i].polygon.material = Cesium.Color.fromCssColorString(setColor(p[i].properties.Travel_Tim));
                p[i].polygon.extrudedHeight = (p[i].properties.Travel_Tim /60)* (p[i].properties.Travel_Tim/60) * 5;
                p[i].polygon.outline = false;
            }

            viewer.dataSources.add(dataSource);
            viewer.zoomTo(dataSource);
        }
    );

    // hide the credit banner, however you should credit the map libraries or data somewhere else.
    document.getElementsByClassName("cesium-widget-credits")[0].style.visibility = "hidden";


</script>
</body>
<!--</body>-->
</html>